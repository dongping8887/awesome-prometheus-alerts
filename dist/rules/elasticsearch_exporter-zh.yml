# ElasticSearch服务监控
groups:
  - name: ElasticSearch服务监控
    rules:
#      - alert: ES集群节点减少
#        expr: elasticsearch_cluster_health_number_of_nodes < 3  #ES集群节点数3
#        for: 5m
#        labels:
#          severity: 严重告警
#        annotations:
#          summary: "ES集群节点减少:{{$.Labels.job}}"
#          description: "ES集群节点数减少:{{$.Labels.job}},(当前:{{$value}})"

      - alert: jvm内存使用率告警
        expr: elasticsearch_jvm_memory_used_bytes{area="heap"} / elasticsearch_jvm_memory_max_bytes{area="heap"}*100 > 90
        for: 5m
        labels:
          severity: 严重告警
        annotations:
          summary: "jvm内存使用率过高:{{$.Labels.job}}"
          description: "jvm内存使用率过高:{{$.Labels.job}}大于90%,(当前:{{$value}})"